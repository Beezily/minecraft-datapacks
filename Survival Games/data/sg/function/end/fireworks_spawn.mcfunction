# Spawn one rocket (tagged sgFirework), then offset it randomly, then remove the tag.
# Uses: %winner sg (1..7) and %fw_var sg (0..3)

# ---------- RED (1) ----------
$execute if score %winner sg matches 1 if score %fw_var sg matches 0 run summon minecraft:firework_rocket ~ ~ ~ {LifeTime:$(lt),Tags:["sgFirework"],FireworksItem:{id:"minecraft:firework_rocket",count:1,components:{"minecraft:fireworks":{explosions:[{shape:"star",has_twinkle:true,has_trail:true,colors:[I;16711680],fade_colors:[I;16744192]}]}}}}
$execute if score %winner sg matches 1 if score %fw_var sg matches 1 run summon minecraft:firework_rocket ~ ~ ~ {LifeTime:$(lt),Tags:["sgFirework"],FireworksItem:{id:"minecraft:firework_rocket",count:1,components:{"minecraft:fireworks":{explosions:[{shape:"large_ball",has_trail:true,colors:[I;16711680,16744192],fade_colors:[I;16776960]}]}}}}
$execute if score %winner sg matches 1 if score %fw_var sg matches 2 run summon minecraft:firework_rocket ~ ~ ~ {LifeTime:$(lt),Tags:["sgFirework"],FireworksItem:{id:"minecraft:firework_rocket",count:1,components:{"minecraft:fireworks":{explosions:[{shape:"creeper",has_twinkle:false,colors:[I;16711680],fade_colors:[I;16777215]}]}}}}
$execute if score %winner sg matches 1 if score %fw_var sg matches 3 run summon minecraft:firework_rocket ~ ~ ~ {LifeTime:$(lt),Tags:["sgFirework"],FireworksItem:{id:"minecraft:firework_rocket",count:1,components:{"minecraft:fireworks":{explosions:[{shape:"burst",has_trail:true,colors:[I;16711680]},{shape:"small_ball",has_twinkle:true,colors:[I;16744192]}]}}}}

# ---------- YELLOW (2) ----------
$execute if score %winner sg matches 2 if score %fw_var sg matches 0 run summon minecraft:firework_rocket ~ ~ ~ {LifeTime:$(lt),Tags:["sgFirework"],FireworksItem:{id:"minecraft:firework_rocket",count:1,components:{"minecraft:fireworks":{explosions:[{shape:"star",has_twinkle:true,colors:[I;16776960],fade_colors:[I;16777215]}]}}}}
$execute if score %winner sg matches 2 if score %fw_var sg matches 1 run summon minecraft:firework_rocket ~ ~ ~ {LifeTime:$(lt),Tags:["sgFirework"],FireworksItem:{id:"minecraft:firework_rocket",count:1,components:{"minecraft:fireworks":{explosions:[{shape:"large_ball",has_trail:true,colors:[I;16776960,16744192]}]}}}}
$execute if score %winner sg matches 2 if score %fw_var sg matches 2 run summon minecraft:firework_rocket ~ ~ ~ {LifeTime:$(lt),Tags:["sgFirework"],FireworksItem:{id:"minecraft:firework_rocket",count:1,components:{"minecraft:fireworks":{explosions:[{shape:"creeper",has_twinkle:false,colors:[I;16776960],fade_colors:[I;16744192]}]}}}}
$execute if score %winner sg matches 2 if score %fw_var sg matches 3 run summon minecraft:firework_rocket ~ ~ ~ {LifeTime:$(lt),Tags:["sgFirework"],FireworksItem:{id:"minecraft:firework_rocket",count:1,components:{"minecraft:fireworks":{explosions:[{shape:"burst",has_trail:true,colors:[I;16776960]},{shape:"small_ball",colors:[I;16777215]}]}}}}

# ---------- BLUE (3) ----------
$execute if score %winner sg matches 3 if score %fw_var sg matches 0 run summon minecraft:firework_rocket ~ ~ ~ {LifeTime:$(lt),Tags:["sgFirework"],FireworksItem:{id:"minecraft:firework_rocket",count:1,components:{"minecraft:fireworks":{explosions:[{shape:"star",has_trail:true,colors:[I;255],fade_colors:[I;65535]}]}}}}
$execute if score %winner sg matches 3 if score %fw_var sg matches 1 run summon minecraft:firework_rocket ~ ~ ~ {LifeTime:$(lt),Tags:["sgFirework"],FireworksItem:{id:"minecraft:firework_rocket",count:1,components:{"minecraft:fireworks":{explosions:[{shape:"large_ball",has_twinkle:true,colors:[I;255,65535],fade_colors:[I;16777215]}]}}}}
$execute if score %winner sg matches 3 if score %fw_var sg matches 2 run summon minecraft:firework_rocket ~ ~ ~ {LifeTime:$(lt),Tags:["sgFirework"],FireworksItem:{id:"minecraft:firework_rocket",count:1,components:{"minecraft:fireworks":{explosions:[{shape:"creeper",has_trail:false,colors:[I;255],fade_colors:[I;16777215]}]}}}}
$execute if score %winner sg matches 3 if score %fw_var sg matches 3 run summon minecraft:firework_rocket ~ ~ ~ {LifeTime:$(lt),Tags:["sgFirework"],FireworksItem:{id:"minecraft:firework_rocket",count:1,components:{"minecraft:fireworks":{explosions:[{shape:"burst",has_trail:true,colors:[I;255]},{shape:"small_ball",has_twinkle:true,colors:[I;65535]}]}}}}

# ---------- GREEN (4) (lime-ish) ----------
$execute if score %winner sg matches 4 if score %fw_var sg matches 0 run summon minecraft:firework_rocket ~ ~ ~ {LifeTime:$(lt),Tags:["sgFirework"],FireworksItem:{id:"minecraft:firework_rocket",count:1,components:{"minecraft:fireworks":{explosions:[{shape:"star",has_trail:true,colors:[I;65280],fade_colors:[I;65535]}]}}}}
$execute if score %winner sg matches 4 if score %fw_var sg matches 1 run summon minecraft:firework_rocket ~ ~ ~ {LifeTime:$(lt),Tags:["sgFirework"],FireworksItem:{id:"minecraft:firework_rocket",count:1,components:{"minecraft:fireworks":{explosions:[{shape:"large_ball",has_twinkle:true,colors:[I;65280,43520],fade_colors:[I;16776960]}]}}}}
$execute if score %winner sg matches 4 if score %fw_var sg matches 2 run summon minecraft:firework_rocket ~ ~ ~ {LifeTime:$(lt),Tags:["sgFirework"],FireworksItem:{id:"minecraft:firework_rocket",count:1,components:{"minecraft:fireworks":{explosions:[{shape:"creeper",has_trail:false,colors:[I;65280],fade_colors:[I;16777215]}]}}}}
$execute if score %winner sg matches 4 if score %fw_var sg matches 3 run summon minecraft:firework_rocket ~ ~ ~ {LifeTime:$(lt),Tags:["sgFirework"],FireworksItem:{id:"minecraft:firework_rocket",count:1,components:{"minecraft:fireworks":{explosions:[{shape:"burst",has_trail:true,colors:[I;65280]},{shape:"small_ball",colors:[I;65535]}]}}}}

# ---------- AQUA (5) ----------
$execute if score %winner sg matches 5 if score %fw_var sg matches 0 run summon minecraft:firework_rocket ~ ~ ~ {LifeTime:$(lt),Tags:["sgFirework"],FireworksItem:{id:"minecraft:firework_rocket",count:1,components:{"minecraft:fireworks":{explosions:[{shape:"star",has_twinkle:true,colors:[I;65535],fade_colors:[I;16777215]}]}}}}
$execute if score %winner sg matches 5 if score %fw_var sg matches 1 run summon minecraft:firework_rocket ~ ~ ~ {LifeTime:$(lt),Tags:["sgFirework"],FireworksItem:{id:"minecraft:firework_rocket",count:1,components:{"minecraft:fireworks":{explosions:[{shape:"large_ball",has_trail:true,colors:[I;65535,255],fade_colors:[I;16777215]}]}}}}
$execute if score %winner sg matches 5 if score %fw_var sg matches 2 run summon minecraft:firework_rocket ~ ~ ~ {LifeTime:$(lt),Tags:["sgFirework"],FireworksItem:{id:"minecraft:firework_rocket",count:1,components:{"minecraft:fireworks":{explosions:[{shape:"creeper",has_twinkle:false,colors:[I;65535],fade_colors:[I;255]}]}}}}
$execute if score %winner sg matches 5 if score %fw_var sg matches 3 run summon minecraft:firework_rocket ~ ~ ~ {LifeTime:$(lt),Tags:["sgFirework"],FireworksItem:{id:"minecraft:firework_rocket",count:1,components:{"minecraft:fireworks":{explosions:[{shape:"burst",has_trail:true,colors:[I;65535]},{shape:"small_ball",colors:[I;16777215]}]}}}}

# ---------- PURPLE (6) (magenta-ish) ----------
$execute if score %winner sg matches 6 if score %fw_var sg matches 0 run summon minecraft:firework_rocket ~ ~ ~ {LifeTime:$(lt),Tags:["sgFirework"],FireworksItem:{id:"minecraft:firework_rocket",count:1,components:{"minecraft:fireworks":{explosions:[{shape:"star",has_twinkle:true,colors:[I;16711935],fade_colors:[I;11141290]}]}}}}
$execute if score %winner sg matches 6 if score %fw_var sg matches 1 run summon minecraft:firework_rocket ~ ~ ~ {LifeTime:$(lt),Tags:["sgFirework"],FireworksItem:{id:"minecraft:firework_rocket",count:1,components:{"minecraft:fireworks":{explosions:[{shape:"large_ball",has_trail:true,colors:[I;16711935,11141290],fade_colors:[I;16777215]}]}}}}
$execute if score %winner sg matches 6 if score %fw_var sg matches 2 run summon minecraft:firework_rocket ~ ~ ~ {LifeTime:$(lt),Tags:["sgFirework"],FireworksItem:{id:"minecraft:firework_rocket",count:1,components:{"minecraft:fireworks":{explosions:[{shape:"creeper",has_trail:false,colors:[I;16711935],fade_colors:[I;16777215]}]}}}}
$execute if score %winner sg matches 6 if score %fw_var sg matches 3 run summon minecraft:firework_rocket ~ ~ ~ {LifeTime:$(lt),Tags:["sgFirework"],FireworksItem:{id:"minecraft:firework_rocket",count:1,components:{"minecraft:fireworks":{explosions:[{shape:"burst",has_trail:true,colors:[I;16711935]},{shape:"small_ball",has_twinkle:true,colors:[I;11141290]}]}}}}

# ---------- SOLO (7) (white) ----------
$execute if score %winner sg matches 7 if score %fw_var sg matches 0 run summon minecraft:firework_rocket ~ ~ ~ {LifeTime:$(lt),Tags:["sgFirework"],FireworksItem:{id:"minecraft:firework_rocket",count:1,components:{"minecraft:fireworks":{explosions:[{shape:"star",has_twinkle:true,colors:[I;16777215],fade_colors:[I;11184810]}]}}}}
$execute if score %winner sg matches 7 if score %fw_var sg matches 1 run summon minecraft:firework_rocket ~ ~ ~ {LifeTime:$(lt),Tags:["sgFirework"],FireworksItem:{id:"minecraft:firework_rocket",count:1,components:{"minecraft:fireworks":{explosions:[{shape:"large_ball",has_trail:true,colors:[I;16777215,11184810],fade_colors:[I;16777215]}]}}}}
$execute if score %winner sg matches 7 if score %fw_var sg matches 2 run summon minecraft:firework_rocket ~ ~ ~ {LifeTime:$(lt),Tags:["sgFirework"],FireworksItem:{id:"minecraft:firework_rocket",count:1,components:{"minecraft:fireworks":{explosions:[{shape:"creeper",has_twinkle:false,colors:[I;16777215],fade_colors:[I;11184810]}]}}}}
$execute if score %winner sg matches 7 if score %fw_var sg matches 3 run summon minecraft:firework_rocket ~ ~ ~ {LifeTime:$(lt),Tags:["sgFirework"],FireworksItem:{id:"minecraft:firework_rocket",count:1,components:{"minecraft:fireworks":{explosions:[{shape:"burst",has_trail:true,colors:[I;16777215]},{shape:"small_ball",colors:[I;11184810]}]}}}}

# Move ONLY the one we just spawned
$execute as @e[type=minecraft:firework_rocket,tag=sgFirework,limit=1,sort=nearest,distance=..6] run tp @s ~$(dx) ~$(dy) ~$(dz)

# Remove the tag so later logic won't touch older rockets
tag @e[type=minecraft:firework_rocket,tag=sgFirework,limit=1,sort=nearest,distance=..20] remove sgFirework